"use strict";var mainController=function(){var e;function t(t){var n,r;n=Quill.import("modules/clipboard"),r=Quill.import("delta"),Quill.register("modules/clipboard",class extends n{convert(e=null){"string"==typeof e&&(this.container.innerHTML=e);let t=this.container.innerText;return this.container.innerHTML="",(new r).insert(t)}},!0),e=new Quill("#messageEditor",{theme:"snow",placeholder:`Message ${t}`,modules:{keyboard:{bindings:{list:{key:"enter",shiftKey:!1,handler:function(){var t=e.root.innerHTML;if(!t)return!1;var n=document.querySelector("#messageForm");return document.querySelector("input[name=newMessage]").value=t,n.submit(),!1}}}}}})}function n(){document.querySelector(".message-box").addEventListener("keydown",function(t){var n=!0,r="";if(t.ctrlKey||t.metaKey)switch(t.keyCode){case 66:case 98:n=!1,r="*";break;case 73:case 105:n=!1,r="_";break;case 85:case 117:n=!1}return r&&function(t){var n=e.getSelection(),r=n.length;if(!(r<1)){var a,o=n.index,c=e.getText(o,r);c.length>2&&c.startsWith(t)&&c.endsWith(t)?(a=c.substr(1,r-2),e.deleteText(o,r),e.insertText(o,a),e.setSelection(o,r-2)):(a=t+c+t,e.deleteText(o,r),e.insertText(o,a),e.setSelection(o,r+2))}}(r),!1===n?(t.stopPropagation(),t.preventDefault(),!1):n},!0)}return{init:function(e){!function(){var e=document.querySelector(".message-scrollable");new SimpleBar(e);var t=document.querySelector(".simplebar-content");t.scrollTop=t.scrollHeight,e.style.visibility="visible"}(),t(e),n(),$(".ql-editor").on("focus",()=>{$(".message-box").addClass("focus")}).on("blur",()=>{$(".message-box").removeClass("focus")})}}}();function Footer(e){return console.log(e),React.createElement("div",{className:"footer"},"channel: ",e.selectedChannelId,React.createElement("form",{id:"messageForm",method:"post"},React.createElement("input",{type:"hidden",name:"channelId",value:e.selectedChannelId}),React.createElement("input",{type:"hidden",name:"newMessage"}),React.createElement("div",{className:"message-box"},React.createElement("div",{id:"messageEditor"}))),React.createElement(MessagePrompt,null))}var domContainer=document.querySelector("#footer");function MessagePrompt(){return React.createElement("div",{className:"message-prompt"},React.createElement("b",null,"*bold*")," ",React.createElement("span",{className:"grey-background"},"`code`")," ",React.createElement("span",{className:"grey-background"},"```preformatted```")," ",React.createElement("i",null,"_italics_")," ",React.createElement("span",null,"~strike~")," ",React.createElement("span",null,">quote")," ")}ReactDOM.render(React.createElement(Footer,{selectedChannelId:domContainer.getAttribute("data-selected-channel-id"),selectedUserId:domContainer.getAttribute("data-selected-user-id")}),domContainer);var signalRController=function(){var e;return{init:function(t){(e=(new signalR.HubConnectionBuilder).withUrl("/chatHub").build()).on("UpdateChannel",function(e){e===app.selectedChannelId&&document.location.reload()}),e.on("ReceiveMessage",function(){document.location.reload()}),e.start().then(function(){$("#container").removeClass("page-loading"),function(t){e.invoke("AddToChannelGroup",t).catch(function(e){return console.error(e.toString())})}(t)}).catch(function(e){return console.error(e.toString())})}}}();
//# sourceMappingURL=site.min.js.map